<html>
<head>
	<style>
		body {
			font-family: Arial;
			background: #0a0a4c;
		}
		.module {
			width: 400px;
			height: 400px;
			margin: 10px;
			border: solid 1px #000;
			float: left;
			border-radius: 7px;
			padding: 5px;
			box-shadow: 0px 1px 5px #00000036;
			background: aliceblue;
            box-shadow: inset 0px -30px 70px rgba(199, 196, 232, 0.38823529411764707);
		}
		h2 {
			text-align: center;
            margin: -5px;
            height: 30px;
            padding: 5px;
            border-bottom: solid 1px #ccc;
            border-top-left-radius: 5px;
            border-top-right-radius: 5px;
            background-color: #fff;
		}
        canvas {
            margin-top: 5px;
        }
	</style>
</head>
<body>
	<div>
		<div id="bargraph" class="module"></div>
		<div id="vbargraph" class="module"></div>
        <div id="datasgraph" class="module"></div>
        <div id="dataltsgraph" class="module"></div>
	</div>
	<script src="js/wes.mantooth.js?v=2"></script>
	<script src="graphs.js"></script>
	<script src="barGraphHorizontal.js"></script>
	<script src="barGraphVertical.js"></script>
    <script src="positiveLiveDataStream.js"></script>
    <script src="liveDataStream.js"></script>
	<script>
		window.onload = function() {
    
    		'use strict';

    		// INitialize the graph tool with width and height
            Graphs.init(400,400);

            /** 

                Horizontal Bar Graph

            */
    		Graphs.horizBarGraph(
    			document.getElementById('bargraph'),
    			'My Test Bar Graph',
    			[
    				{
    					text:'A',
    					val:400
    				},
    				{
    					text:'B',
    					val:700
    				},
    				{
    					text:'C',
    					val:1300
    				},
    				{
    					text:'D',
    					val:2500
    				},
    				{
    					text:'E',
    					val:225
    				},
    				{
    					text:'F',
    					val:225
    				},
    				{
    					text:'G',
    					val:876
    				},
    				{
    					text:'H',
    					val:1100
    				}
    			]
    		);
            /** 

                Vertical Bar Graph

            */
			Graphs.verticalBarGraph(
    			document.getElementById('vbargraph'),
    			'My Test Bar Graph',
    			[
    				{
    					text:'Q',
    					val:2400
    				},
    				{
    					text:'B',
    					val:1300
    				},
    				{
    					text:'C',
    					val:700
    				},
    				{
    					text:'D',
    					val:400
    				},
    				{
    					text:'G',
    					val:230
    				},
    				{
    					text:'G',
    					val:876
    				},
    				{
    					text:'H',
    					val:1100
    				}
    			]
    		);
            /** 


                Live Stream Graph


            **/
            // make some fake seed data to start
            var _data = [];
            for(let i=0; i<350; i++)
                _data.push(Math.random() * 400);

            Graphs.posLiveDataStream(
                document.getElementById('datasgraph'),
                'My Test Data Stream',{
                    getFunction:getFakeData, // a call to a function to retreive data
                    getParams:{blah:'A'},
                    updateint:30,            // how often to check for updates to the data in milliseconds
                    data:_data               // use this to seed initial data if avaiable 
                }
            );

            _data = [];
            for(let i=0; i<350; i++)
                _data.push(-300 + Math.random() * 600);
            Graphs.livDataStream(
                document.getElementById('dataltsgraph'),
                'Live Data Stream ( + / - )',{
                    getFunction:getFakeData2, // a call to a function to retreive data
                    getParams:{blah:'B'},
                    updateint:30,            // how often to check for updates to the data in milliseconds
                    data:_data               // use this to seed initial data if avaiable 
                }
            );
    	}
	</script>

    <script>
        /** 

        FAKE TESTING DATA FOR THE STREAM GRAPHS

        */
        //@var {Number}
        var FOO = 0;
        /** 
         * comment
         * @method getFakeData
         * */
        var getFakeData = function(params) {
            return new Promise(
                function (resolve, reject) {
                    //console.log(params);
                    let c = 0;
                    FOO++;
                    if(FOO < 50){
                        c = Math.random() * 600;
                    }
                    if(FOO > 50){
                        c = Math.random() * 100;
                    }
                    if(FOO > 100){
                        c = Math.random() * 1000;
                    }
                    if(FOO > 250){
                        c = Math.random() * 300;
                    }
                    if(FOO > 750){
                        c = Math.random() * 1500;
                    }
                    if(FOO > 1000){
                        FOO = 0;
                    }
                    resolve(c);
                }
            );
        }
         //@var {Number}
        var BAR = 0;
        /** 
         * comment
         * @method getFakeData
         * */
        function getFakeData2(params,callback) {
            return new Promise(
                function (resolve, reject) {
                    let c = 0;
                    
                    BAR++;
                    if(BAR < 250){
                        c = -300 + Math.random() * 600;
                    }
                    if(BAR > 250){
                        c = -400 + Math.random() * 800;
                    }
                    if(BAR > 300){
                        c = -1000 + Math.random() * 2000;
                    }
                    if(BAR > 450){
                        c = -150 + Math.random() * 300;
                    }
                    if(BAR > 850){
                        c = -300 + Math.random() * 600;
                    }
                    if(BAR > 1000){
                        BAR = 0;
                    }
                    resolve(c);
                }
            );
        }
    </script>
</body>
</html>
